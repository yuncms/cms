{"version":3,"sources":["typeahead.jquery.js"],"names":["root","factory","define","amd","a0","exports","module","require","jQuery","this","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","later","callNow","context","args","arguments","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","WWW","defaultClassNames","wrapper","input","hint","menu","dataset","suggestion","selectable","empty","open","cursor","highlight","o","www","classes","css","position","display","top","left","borderColor","boxShadow","opacity","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","html","c","selectors","v","k","EventBus","namespace","deprecationMap","el","error","$el","render","cursorchange","select","autocomplete","prototype","_trigger","type","$e","Event","unshift","trigger","before","slice","isDefaultPrevented","deprecatedType","EventEmitter","splitter","nextTick","nextTickFn","window","setImmediate","getNextTick","onSync","types","on","onAsync","off","_callbacks","split","shift","callbacks","syncFlush","asyncFlush","getFlush","sync","concat","async","method","push","cancelled","i","len","length","doc","defaults","node","pattern","tagName","className","wordsOnly","caseSensitive","regex","patterns","regexStr","escapedPatterns","join","RegExp","getRegex","traverse","hightlightTextNode","childNode","childNodes","textNode","patternNode","wrapperNode","exec","data","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","document","Input","specialKeyCodeMap","$input","$hint","query","queryWhenFocused","hasFocus","$overflowHelper","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","9","27","37","39","13","38","40","normalizeQuery","_onBlur","resetInputValue","_onFocus","_onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","_setQuery","getInputValue","preventDefault","withModifier","dir","toLowerCase","attr","silent","areEquivalent","hasDifferentWhitespace","a","b","onBlur","onFocus","onKeydown","onInput","that","focus","blur","getLangDir","getQuery","setQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","remove","altKey","ctrlKey","metaKey","shiftKey","Dataset","keys","nameGenerator","templates","notFound","source","name","limit","displayFn","getDisplayFn","displayKey","pending","header","footer","getTemplates","__ttAdapter","_resetLastSuggestion","addClass","extractData","_overwrite","suggestions","_renderSuggestions","_renderPending","_renderNotFound","_empty","_append","$lastSuggestion","_appendSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","append","_getFooter","after","template","fragment","createDocumentFragment","_injectQuery","_query","update","canceled","syncCalled","rendered","cancel","clear","isEmpty","Menu","$node","datasets","oDataset","find","first","appendTo","_onSelectableClick","currentTarget","_onRendered","toggleClass","_allDatasetsEmpty","_onCleared","_propagate","_getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","onSelectableClick","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","newIndex","eq","setCursor","getSelectableData","getTopSelectable","isValidUpdate","DefaultMenu","_show","_hide","hide","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","_updateHint","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","_openIfActive","escapedQuery","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","payload","ctx","methods","old","ttEach","$els","typeahead","$elOrNull","attrs","initialize","classNames","$wrapper","defaultHint","defaultMenu","MenuConstructor","d","removeData","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","prop","removeAttr","spellcheck","tabindex","style","prepInput","wrap","parent","t","success","newVal","detach","noConflict"],"mappings":"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","file":"typeahead.jquery.js","sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});"]}